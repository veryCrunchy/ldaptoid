# LDAP-to-ID Proxy Environment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Identity Provider Configuration (REQUIRED)
# =============================================================================

# Identity provider type: keycloak, entra, or zitadel
LDAPTOID_IDP_TYPE=zitadel

# Base URL of your identity provider
LDAPTOID_IDP_BASE_URL=https://company.zitadel.cloud

# OAuth2 client credentials
LDAPTOID_IDP_CLIENT_ID=your-client-id
LDAPTOID_IDP_CLIENT_SECRET=your-client-secret

# =============================================================================
# IdP-Specific Configuration
# =============================================================================

# For Keycloak: specify the realm
LDAPTOID_IDP_REALM=company

# For Entra ID: specify the tenant ID
LDAPTOID_IDP_TENANT=00000000-0000-0000-0000-000000000000

# For Zitadel v2: specify organization (optional)
LDAPTOID_IDP_ORGANIZATION=your-org-id

# =============================================================================
# LDAP Configuration
# =============================================================================

# Base DN for LDAP directory
LDAPTOID_LDAP_BASE_DN=dc=company,dc=com

# LDAP bind credentials (optional, for authenticated searches)
LDAPTOID_LDAP_BIND_DN=cn=admin,dc=company,dc=com
LDAPTOID_LDAP_BIND_PASSWORD=admin-password

# Allow anonymous LDAP binds (true/false)
LDAPTOID_ALLOW_ANONYMOUS_BIND=true

# =============================================================================
# Redis Configuration (Optional but Recommended)
# =============================================================================

# Enable Redis for persistent UID/GID mapping
LDAPTOID_REDIS_ENABLED=true

# Redis connection details
LDAPTOID_REDIS_HOST=localhost
LDAPTOID_REDIS_PORT=6379
LDAPTOID_REDIS_PASSWORD=secure-redis-password
LDAPTOID_REDIS_DATABASE=0

# =============================================================================
# Feature Flags
# =============================================================================

# Comma-separated list of enabled features:
# - synthetic_primary_group: Create synthetic primary groups for each user
# - mirror_nested_groups: Mirror nested group relationships in LDAP structure
LDAPTOID_ENABLED_FEATURES=synthetic_primary_group,mirror_nested_groups

# =============================================================================
# Operational Configuration
# =============================================================================

# Enable verbose logging (true/false)
LDAPTOID_VERBOSE=false

# Snapshot refresh interval in milliseconds (default: 300000 = 5 minutes)
LDAPTOID_REFRESH_INTERVAL_MS=300000

# Maximum backoff delay for failed refreshes in milliseconds
LDAPTOID_MAX_BACKOFF_MS=300000

# Maximum consecutive refresh failures before giving up
LDAPTOID_MAX_RETRIES=10

# =============================================================================
# Network Configuration
# =============================================================================

# LDAP server port (default: 389)
LDAPTOID_LDAP_PORT=389

# Maximum LDAP search result size (default: 1000)
LDAPTOID_LDAP_SIZE_LIMIT=1000

# Metrics server port (default: 9090)
LDAPTOID_METRICS_PORT=9090

# Health check server port (default: 8080)
LDAPTOID_HEALTH_PORT=8080

# =============================================================================
# Docker Compose Configuration
# =============================================================================

# Redis password for Docker Compose setup
REDIS_PASSWORD=secure-redis-password

# Grafana admin password
GRAFANA_PASSWORD=secure-grafana-password
